Цитата Dimentor пишет: mysql_query("SET NAMES 'cp1251'"); mysql_query("SET collation_connection = 'cp1251_general_ci'"); mysql_query("SET collation_server = 'cp1251_general_ci'"); mysql_query("SET character_set_client = 'cp1251'"); mysql_query("SET character_set_connection = 'cp1251'"); mysql_query("SET character_set_results = 'cp1251'"); mysql_query("SET character_set_server = 'cp1251'"); Цитата Dimentor пишет: ЦитатаПроблема в том, что MySQL стандартно настроена на работу с UTF-8 Unicode кодировкой. Все мы при написании сайтов используем win-cp1251. Вот и MySQL перекодирует всё на ???. Проблема решается вот таким кодом: <? mysql_query("SET NAMES 'cp1251'"); mysql_query("SET collation_connection = 'cp1251_general_ci'"); mysql_query("SET collation_server = 'cp1251_general_ci'"); mysql_query("SET character_set_client = 'cp1251'"); mysql_query("SET character_set_connection = 'cp1251'"); mysql_query("SET character_set_results = 'cp1251'"); mysql_query("SET character_set_server = 'cp1251'"); ?> MySQL и русская кодировка WINDOWS-1251 Сегодня мы рассмотрим, что нужно написать в конфигурационном файле /etc/my.cnf для того, чтобы настроить mysql стандартной сборки на работу с кодировкой cp1251 по умолчанию без всякой перекомпиляции. Рассмотрим пример конфига на основе MySQL 5.x. В раздел [mysqld] необходимо добавить следующее: default-character-set=cp1251 character-set-server=cp1251 collation-server=cp1251_general_ci init-connect="SET NAMES cp1251" skip-character-set-client-handshake Две последние строки принудительно устанавливают кодировку cp1251 для всех запросов. В раздел [mysqldump] достаточно добавить только default-character-set=cp1251 Этого достаточно, чтобы MySQL работал с windows-1251 кодировкой по умолчанию. Проверял на денвере. Все работает. Зачем такой огород городить? Бред. Особенно вредная штука - это skip-character-set-client-handshake. Для нормальной работы с mysql5 нужно только 2 вещи: 1. Когда создаешь базу нужно явно указать чарсет: CREATE DATABASE `имя_базы` DEFAULT CHARACTER SET cp1251; (если не задал чарсет в базе, или он там задан не тот, или хочешь перестраховаться - можно аналогично задать чарсет при создании каждой таблицы) 2. Сразу после КАЖДОГО соединения с сервером даешь команду "set names cp1251" Все! При этом ты волшебным образом можешь, например, дать "set names utf8" (или другую кодировку, поддерживающую русские буквы) и получить данные именно в этой кодировке. Хотя фактически в базе данные будут лежать в 1251 - mysql будет перекодировать на лету. А самый продвинутый способ - это создавать базы в UTF-8. И сайт тоже. Я серьезно - лично я неоднократно сталкивался с проблемой немецких умляутов на русских сайтах... Зачем такой огород городить? Бред.Особенно вредная штука - это skip-character-set-client-handshake.Для нормальной работы с mysql5 нужно только 2 вещи:1. Когда создаешь базу нужно явно указать чарсет:CREATE DATABASE `имя_базы` DEFAULT CHARACTER SET cp1251;(если не задал чарсет в базе, или он там задан не тот, или хочешь перестраховаться - можно аналогично задать чарсет при создании каждой таблицы)2. Сразу после КАЖДОГО соединения с сервером даешь команду "set names cp1251"Все!При этом ты волшебным образом можешь, например, дать "set names utf8" (или другую кодировку, поддерживающую русские буквы) и получить данные именно в этой кодировке. Хотя фактически в базе данные будут лежать в 1251 - mysql будет перекодировать на лету.А самый продвинутый способ - это создавать базы в UTF-8. И сайт тоже.Я серьезно - лично я неоднократно сталкивался с проблемой немецких умляутов на русских сайтах...